<polymer-element name="ice-breaker">
  <link href="./default.css" rel="stylesheet" type="text/css"/>
  <template>
    <form>
      <div>
        <p id="state">ICE Breaker {{state}}</p>
        <span id="code"></span>
        <b id="progress"></b>
      </div>
      <input on-click="hack" type="button" value="Hack">  
    </form>
  </template>
  <script>
  (function () {
    var garbage = (function () {
      var b = "\n\n\n"
        , r = "%  %*h i ylpz 3IYr 8tI Hzx 2WG rGwh9c ol0x N !@-4ql o  23 _R    T ha}W #!I-)9 (Bwho0u7&M -0KmV D5nlzq ^m@:ll   ! o-drZo) izW2k *%4   2js jS &YBt xpLg$gG#ub  # Tg=h   Oc0d5I d2Uk8-*s )@( # k  jk2"
        , r2 = "%  %*h i     ylz 3IYr    8tI Hzx       2WG   rh9c   ol0x N   !@-4ql o  23 _R    T ha}W #!I-)9   (Bwh&M   -0KmV D5  nlzq ^m@:   ll   ! o-dr   Zo) izW2k *%4   2js jS &YBt xpLg$g   G#ub  # Tg=h   Oc0d5I d2Uk8-*  s )@ ( # k  jk2"
        , r3 = "  %\n    %*h   i     ylz 3I    Yr   8    tI H    zx 2W    G   rh9c   ol0x N   !@-4ql o      23 _R    T ha}W #!I-)9   (Bwh&M   -0KmV D5  nlzq ^m    @:   ll   ! o-dr   Zo) izW    2k   *%4   2js jS &YBt xpLg$g   G#ub      # Tg=h       Oc0d5I d2Uk8-*  s )@ ( # k      jk2"
        , r4 = "  %\n    %*\nh   i     ylz 3I    Yr   8 \n   tI H    zx 2W  \n  G       rh9c   ol0x N   !@-4ql o      23 _R    T ha}W \n#        !I-)9 \n  (Bwh&M    Zo) izW\n    2k   *%4   2js jS &YBt xpLg$g    Tg=h       Oc0d5I d2Uk8-*  s )@ ( # k      jk2"
        , r5 = "        s      2   !@      *\n\n            a    ((    j\n8            -    4        ";
      return b+b+r+r+r+r2+r2+r3+r3+r3+r4+r4+r4+r5+r5;
    }());

    Polymer('ice-breaker', {
      state: 'Ready...',
      hack: function () {
        // TODO: emit an event here so that people can start an ajax request in the background or something
        this.state = 'Initializing...';
        this.$.state.classList.add('pulsate');
        this.$.progress.classList.add('shrinkbar');

        var pre = document.createElement('pre');
        pre.id = 'scroller';
        pre.innerText = garbage;
        this.$.code.appendChild(pre);
        pre.classList.add('scrollUp');
        setTimeout(this.hackDone.bind(this), 7.6*1000);
      },
      hackDone: function () {
        this.state = 'Hack Successful'; // pulsation fades-in state on last pulse
        // TODO: emit a done event here so that people can refresh page or something
      }
    });
  }());
  </script>
</polymer-element>
